"use strict";function GetQueryString(n){var i=new RegExp("(^|&)"+n+"=([^&]*)(&|$)","i"),t=window.location.search.substr(1).match(i);return t!==null?unescape(t[2]):null}function getUrlTwo(){var n=window.location.toString(),t=n.substring(n.lastIndexOf("/",n.lastIndexOf("/")-1)+1,n.lastIndexOf("/"));return t!==null?unescape(t):null}function TmptJs(n){var v=this,u=$.extend({openTag:"{{",clossTag:"}}",errorUrl:"/common/AddFrontError",loginUrl:"/Home/Login.html",apiUrl:"",containerSelector:".tmpt-container",noImage:"/Content/V3/images/notFound.jpeg",loadErrorImage:"/Content/images/modulebaseload.gif"},n),t={trigger:function(){this[arguments[0]]&&this[arguments[0]](arguments)},ready:{all:[]},error_0:{all:[]},renderProcess:!1,loadmodule:{"default":function(n){var t=$("#"+n);$.ajax({url:t.attr("tmpt-async"),type:"get",async:!0,dataType:"html",success:function(n){t.html(n);i.init(t);t.show()},error:function(n){r("ajax-error:",n)}})}}},o={parseTime:function(n,t){if(!n)return"";var i=n.replace(/[^0-9-]/ig,"");return new Date(parseInt(i)).format(t)},toFixed:function(n,t){return n.toFixed(parseInt(t))},maxLength:function(n,t,i){return n.substring(0,t)+(i||"")},count:function(n){return n.length},sum:function(n,t){var i=0;return n.forEach(function(){var n="value."+t;val=eval(n)||"0";i+=parseInt(val)}),i},countif:function(n,t){t=t.replace("&gt;",">");var r=t.match(/^([\w]+)=>/)[1],u=new RegExp(""+r+"\\.","g"),f=t.match(/=>(.+)/)[1].replace(u,"value."),i=0;return $.each(n,function(){eval(f)&&i++}),i},compare:function(n,t){return n>t},replaceIf:function(n,t){try{if(eval(str))return t}catch(i){console.log("rendFun replace error")}},buildHtml:function(n){return n||"<div><h1>HHHHHHHHHHHHHHHHHH<\/h1><\/div>"},buildText:function(n){return n=n||"<div><h1>HHHHHHHHHHHHHHHHHH<\/h1><\/div>",i.htmlEncode(n)},exit:function(n){return $.isArray(n)?n.length>0:!!n||n===0},notExit:function(n){!o.exit(n)},isNull:function(n){return!!n},"default":function(n,t){return n==null?t:n||t},equal:function(n,t){return n==t},firstOrDefault:function(n){return n[0]||0}},i={doArrFun:function(n){for(var t=0;t<n.length;t++)typeof n[t]=="function"&&n[t]()},allready:function(n,r){if(n&&(nt++,t.renderProcess&&t.renderProcess(i.getRenderProcess(),r),$(".tmpt-m:not(.rendered)").length===0&&t.ready.all.length>0)){window.allRender&&window.allRender();for(var u=0;u<t.ready.all.length;u++)typeof t.ready.all[u]=="function"&&t.ready.all[u]();t.ready.all=[];t.renderProcess&&t.renderProcess(100,"$dom")}},styleRender:function(n){var t=f("#"+n);if($css=t.find("[tmpt-css]"),$css.length===0)return!1;$css.each(function(n,t){for(var u,o=$(this).attr("tmpt-css"),f=o.split(";"),e={},i=0;i<f.length;i++)if(f[i]){if(u=f[i].match(/([^:]+):([^:]+)/),u.length!=3){r("tmpt-css error",t);continue}e[u[1]]=u[2]}$(this).css(e)})},attrRender:function(n){var t=f("#"+n),e,o,s,h,c,l;$show=t.find("[tmpt-show]");$show.each(function(){var n=$(this).attr("tmpt-show");n=="true"||n=="!false"||(n=="false"||n=="!true"?$(this).remove():eval(n)||$(this).remove())});e=t.find("[tmpt-value]");e.each(function(n,t){t.value=$(this).attr("tmpt-value")});o=t.find("[tmpt-inner]");o.each(function(){var n=$(this);$.ajax({url:n.attr("tmpt-inner"),type:"get",async:!0,dataType:"html",success:function(t){n.html(t);i.init(n);n.show()},error:function(n){r("ajax-error:",n)}})});s=t.find("[tmpt-inner-delay]");s.each(function(){var n=$(this),t=n.attr("tmpt-inner-delay-time");t&&setTimeout(function(){$.ajax({url:n.attr("tmpt-inner-delay"),type:"get",async:!0,dataType:"html",success:function(t){n.html(t);i.init(n);n.show()},error:function(n){r("ajax-error:",n)}})},t)});h=t.find("[tmpt-html]");h.each(function(n,t){t.innerHTML=$(this).attr("tmpt-html");$(this).removeAttr("tmpt-html")});c=t.find("[tmpt-select]");c.each(function(){var n=$(this),t=n.attr("tmpt-select");t&&(n.find("option").removeAttr("selected"),n.find('option[value="'+t+'"]').eq(0).attr("selected","selected"))});l=t.find("[tmpt-src]");l.each(function(){var n=$(this),t=new Image,i=n.attr("tmpt-src");t.onload=null;t.dycsrc=i;t.onload=function(){n.removeAttr("tmpt-src");n.attr("src",i)};t.onerror=function(){n.removeAttr("tmpt-src");var t=i.match(/(^https?:\/\/[\w\.:]+)\//),r=t&&t[1]||"";n.attr("src",r+u.noImage)};t.src=i})},theif:function(n){var t=n.split("|");$.each(t,function(n,t){$.each(t.split("&"),function(n,t){if(t.indexOf("==")>0){var i=t.split("==");i[0]=i[1]}else t.indexOf(">=")>0||t.indexOf("<=")>0||t.indexOf(">")>0&t.indexOf(">=")<0||t.indexOf("<")>0&t.indexOf("<=")<0})})},htmlEncode:function(n){return typeof n=="string"?n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):n},htmlDescode:function(n){return typeof n=="string"?n.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'"):n},beginLoad:function(){},endLoad:function(n){var t=f("#"+n);t.find(".tmpt-load > *").css({visibility:"visible"});t.find(".tmpt-load").removeClass("tmpt-load");t.find(".tmpt-load-hide").removeClass("tmpt-load-hide");$("#"+n+"[tmpt-async]").show()},replaceFun:function(){},init:function(n,t){var r="",u="",i,f;return(typeof t=="undefined"?(r=n.attr("tmpt-url"),u=n.attr("tmpt-data")):typeof t=="string"?r=t:typeof t=="object"&&(t=t),i=n.prop("id"),i||(i="tmptid-"+tt,tt++,n.prop("id",i)),r)?v.fac(i,r):u?/\(|\)|<|>|\./g.test(t)===!1?(f=eval("("+t+")"),v.fac(i,f)):v.fac(i,{}):t?(t.tmptId=i,v.fac(t)):void 0},initDelay:function(){var t=$("[tmpt-async]"),n;t.each(function(){var n=$(this);$.ajax({url:n.attr("tmpt-async"),type:"get",async:!0,dataType:"html",success:function(t){n.html(t);i.init(n)},error:function(n){r("ajax-error:",n)}})});n=$("[tmpt-delay]");n.each(function(){var n=$(this),t=n.attr("tmpt-delay-time");t&&setTimeout(function(){$.ajax({url:n.attr("tmpt-delay"),type:"get",async:!0,dataType:"html",success:function(t){n.html(t);i.init(n)},error:function(n){r("ajax-error:",n)}})},t)})},serializToObj:function(n){var t={};return $.each(n.split("&"),function(n,i){var r=i.split("=");t[r[0]]=r[1]}),t},getRenderProcess:function(){return 50+40*nt/et},renderError:function(n){f("#"+n).find(".tmpt-load").css({background:"url("+u.loadErrorImage+") 50% 50% no-repeat"})},apiDataStatus:function(n){return n.Status==200?!0:n.Status==401?(document.location=u.loginUrl,!1):n.Status==404?(alertMs("没有找到！"),!0):n.Status==500?(alertMs("服务器异常！"),!0):n.Status==302?(alertMs("资源重定向！"),!0):!0},apiDataProcessing:function(n){return n}},p={dialogDefault:'<div style="width:200px;height:100px;border:1px blue solid;"><div class="tmpt-dialog-content"><\/div><div class="tmpt-close">关闭<\/div><\/div>',dialogLoad:'<div class="object" id="object_one"><\/div>            <div class="object" id="object_two"><\/div>            <div class="object" id="object_three"><\/div>            <div class="object" id="object_four"><\/div>            <div class="object" id="object_five"><\/div>            <div class="object" id="object_six"><\/div>            <div class="object" id="object_seven"><\/div>            <div class="object" id="object_eight"><\/div>'},ut={},s={},w={},c={},ft={},b={},k={},d={},g={},et=$(".tmpt-m").length,nt=0,tt=0,y=$('<div id="documemt"><\/div>'),r=function(n,t){console.log(n,t);try{$.ajax({type:"POST",async:!0,url:u.apiUrl+u.errorUrl,data:{type:n,message:t},error:function(){console.info("log error!")}})}catch(r){}},ot=function(n,t){y.find("#"+n).length||y.append(t)},a;this.fac=function(n,i,r,u,f){if(typeof n=="string"&&typeof i=="string"&&typeof r=="string")return e(n,i,r,u,f);if(typeof n=="function")return t.ready.all.push(n),!1;if(typeof n=="string"&&typeof i=="string"&&(typeof r=="undefined"||typeof r=="boolean"))return f=!0,typeof r=="boolean"&&(f=r),e({tmptId:n,url:i,asyncflag:f});if(typeof n=="string"&&(typeof i=="object"||typeof i=="undefined"))return typeof i=="undefined"&&(i={}),e({tmptId:n,data:i});if(typeof n=="object"){var o=$.extend({},{hasReady:!1,onready:!1,onerror_0:!1},n);return typeof o.ready=="function"&&(t.ready[o.tmptid]=o.onready),typeof o.error_0=="function"&&(t.error_0[o.tmptid]=o.onerror_0),e(o)}return e(n,i,r,u,f)};var f=function(n){var t=$(n);return t.length?t:y.find(n)},e=function(n,e,o,h,a){var p=!0,v={},yt,y,rt,nt,vt,ht,ct,lt,tt,at;try{if(typeof n=="object"&&(v=$.extend({},{tmptId:"",controller:"",action:"",parameter:null,asyncflag:!0,data:"",url:"",partialId:null,hasReady:!0},n),p=v.hasReady,n=v.tmptId,e=v.controller,o=v.action,h=v.parameter,a=v.asyncflag),yt="",y=null,v.$tmpt&&ot(n,v.$tmpt),nt=f("#"+n),rt=v.partialId?nt.find("#"+v.partialId)[0]:nt[0],!rt)throw"未找到该模块！:"+n;if(vt=[],s[n]?y=v.partialId?s[n].clone().find("#"+v.partialId):s[n].clone():(vt=st(nt),y=nt.clone(),s[n]=y.clone()),ht=function(r){var f,e;r&&(r.Type===0?(r.Message&&alertMs(r.Message),typeof t.error_0[n]=="function"&&(y.find(" .content, .tmpt-load").css({background:"url("+u.loadErrorImage+")"}),t.error_0[n](r))):r.Type==401?document.location=u.loginUrl:(w[n]=r,c=r,r.$tmptid=n,f=r.ListData&&IsArray(r.ListData)?r:r.ListData?r.ListData:r,e=it(y.clone(),f,n),rt.outerHTML=l(e,r,n),i.styleRender(n),i.attrRender(n),i.endLoad(n),typeof t.ready[n]=="function"&&p&&t.ready[n](n,r)))},!v.url||(ct=v.url.split("?"),h=ct[1],lt=ct[0].split("/"),e=lt[0],o=lt[1]),!v.data||typeof v.data!="object"){if(typeof h!="string"||!h)g[n]=h;else{var et=h.match(/\{([^\}]*)\}/g);if(et)for(tt=0;tt<et.length;tt++)evalResult=eval(et[tt].match(/\{([^\}]*)\}/)[1]),h=h.replace(et[tt],evalResult);d[n]=h}if(o=o||k[n],e=e||b[n],k[n]=o,b[n]=e,typeof h=="string"&&(v.url=e+"/"+o+"?"+h),ft[n]=v.url,e!="Done")return at=$.tpajax({url:u.apiUrl+"/"+e+"/"+o,data:h,async:a===!1?!1:!0,type:"post",success:function(n){i.apiDataStatus(n)&&ht(n.Data||n)},error:function(t){r("ajax-error-"+n+"; url:"+e+"/"+o,t);rt.outerHTML=l(y,"",n);i.renderError(n)},complete:function(){f("#"+n).addClass("rendered");i.allready(p,n)}}),ut[n]=at,at;f("#"+n).addClass("rendered");i.allready(p,n)}else ht(v.data),f("#"+n).addClass("rendered"),i.allready(p,n)}catch(pt){f("#"+n).addClass("rendered");i.allready(p,n);r("moduleRender-error the tmptid is'"+n+"'",pt)}},st=function(n){if(n.find(u.containerSelector).length>0){var t;n.find(".module-title").length>0?(n.find(".module-title .title-add").eq(0).addClass("selected"),t=n.find(".module-content>.tmpt-m"),t.length>0&&t.each(function(n){n>0&&$(this).addClass("tmpt-hide");var t=$(this).attr("id"),i=$(this).attr("controller"),r=$(this).attr("action"),u=$(this).attr("routevalue");e(t,i,r,u)})):(t=n.find(".tmpt-m"),t.length>0&&t.each(function(){var n=$(this).attr("id"),t=$(this).attr("controller"),i=$(this).attr("action"),r=$(this).attr("routevalue");e(n,t,i,r)}))}},fr=function(n,t,i){var u=n.parents("[tmpt-show]"),e,f;if(u.length>0){e=u.attr("tmpt-show").replace(/{{/g,"").replace(/}}/g,"");try{return h(e,t,i)?(u.removeAttr("tmpt-show"),!0):(u.remove(),!1)}catch(o){return u.remove(),r("Tmpt-show and tmptid:"+i,o),!1}}if(f=n.attr("tmpt-show"),f)try{return(f=f.replace(/{{/g,"").replace(/}}/g,""),!h(f,t,i))?(n.remove(),!1):(n.removeAttr("tmpt-show"),!0)}catch(o){return n.remove(),r("Tmpt-show and tmptid:"+i,o),!1}return!0},it=function(n,t,i){var r=n.find("[tmpt-each]").not(n.find("[tmpt-each] [tmpt-each]"));return r.length===0&&(r=n.find(".tmpt-each").not(n.find(".tmpt-each .tmpt-each"))),r.each(function(){var n=$(this),u=n.attr("each-sonModel")||n.attr("tmpt-each")||"ListData",f="Obj."+u,r=eval(f)||"";r!==""&&r.length>0?n.replaceWith(ht(n.clone(),r,i,t)):n.remove()}),n},ht=function(n,t,i,r){var u=n.find("[tmpt-each]"),f;return u.length===0&&(u=n.find(".tmpt-each")),f="",$.each(t,function(t,e){var o=n.clone();typeof e=="string"?f+=l(n,{$value:e},i):(e.$index=t+1,e.$last=r,u.length>0?(e.Nodes&&e.Nodes.length&&$.each(e.Nodes,function(t,i){if(i.Nodes&&i.Nodes.length)return u.append(u.parent().clone()),o=n.clone(),!1}),it(o,e,i),f+=l(o,e,i)):f+=l(o,e,i))}),f},l=function(n,t,i){var f=n[0].outerHTML,r,e;return f?(r="",e="tmpt-each",$.each(f.split(u.openTag),function(n,f){f=f.split(u.clossTag);var o=f[0],e=f[1];f.length===1?r+=rt(f):(r+=h(o,t,i),e&&(r+=rt(e)))}),r=ct(r,t),r=lt(r,t)):""},rt=function(n){return n},h=function(n,t,u){var g=n.indexOf("#")===0,rt,l,e,nt,a,v,y,p,w,b,et,f,ot,tt,d,h,it;g&&(n=n.substring(1));rt=n;try{if(l="",/[a-zA-Z]+\(/g.test(n)===!0)return e=n.match(/([\w]+)\(/)[1],nt=n.match(/[\w]+\(([^\)]+)\)/),!!nt&&nt.length>1&&(et=nt[1].split(","),$.each(et,function(n,i){var r="",u;i=="$value"?r=t:/'[^']*'/.test(i)?r=i.match(/'([^']*)'/)[1]:/^\$value\.[\w\.]+/.test(i)?(u=i.match(/^\$value\.([\w\.]+)/)[1],l="data."+u,r=eval(l)):(l="data."+i,r=eval(l));switch(n){case 0:a=r;break;case 1:v=r;break;case 2:y=r;break;case 3:p=r;break;case 4:w=r;break;case 5:b=r}})),f=!1,typeof o[e]=="function"?(f=g?i.htmlEncode(o[e](a,v,y,p,w,b)):o[e](a,v,y,p,w,b),f=n.replace(/([\w]+)\([^\)]*\)/,f)):typeof window[e]=="function"?(f=g?i.htmlEncode(window[e](a,v,y,p,w,b)):window[e](a,v,y,p,w,b),f=n.replace(/([\w]+)\([^\)]*\)/,f)):r("logic error:tmptid is '"+u+"' and error code is: "+rt,"function:"+e+" is undefined"),f;if(/\+|\-|\*|\/|<|>|==|!|\?/g.test(n))return n=i.htmlDescode(n),n=n.replace(/[a-zA-Z\.\$']+/g,function(n){var t="",i;return n=="$value"?t="data":/'[^']*'/.test(n)?t=n:/^\$value\.[\w\.]+/.test(n)?(i=n.match(/^\$value\.([\w\.]+)/)[1],t="data."+i):t="data."+n,t}),eval(n)}catch(ct){r("logic error:tmptid is '"+u+"' and error code is: "+rt,ct)}if(f="",ot=n.match(/\./g),null!==ot){var st=n.lastIndexOf("."),ut=n.substring(0,st),ht=n.substring(st+1),ft="",k="",s=[];if(ut.match(/TOP/g))if(s=ut.split("."),s.length>1)for(tt=1;tt<s.length;tt++)k+="_data."+s[tt];else k+="_data";else for(s=ut.split("."),d=0;d<s.length;d++)ft+="data."+s[d],k+="_data."+s[d];ft+="."+ht;k+="."+ht;try{h=eval(ft)}catch(ct){}try{it=eval(k)}catch(ct){}f=h||h===0||h!==undefined?h:it||it===0||h!==undefined?it:" 无数据   "}else f=t?t[n]||t[n]===0||t[n]!==undefined?t[n]:c[n]||c[n]===0||c[n]!==undefined?c[n]:" 无数据   ":" 无数据   ";return g?i.htmlEncode(f):f},ct=function(n,t){var i,u=$($.parseHTML(n.replace(/\r\n/g,""))),e=u.find("[tmpt-display]"),f,r;if(e.length>0){for(e.each(function(){var n;i=!1;var r=$(this).attr("tmpt-display"),u=r.match(/\[\[[^\]]*\]\]/g);if(u)for(n=0;n<u.length;n++){var e=u[n].match(/(\[\[)([^\]]*)(\]\])/),o=e[2],f=h(o,t);r=f!==null&&f!==""?IsArray(f)?r.replace(u[n],f.length):r.replace(u[n],f):r.replace(u[n],"''")}try{i=eval(r)}catch(s){i=!1}i||$(this).remove();$(this).removeAttr("tmpt-display")}),f="",r=0;r<u.length;r++)f+=u[r].outerHTML;return f}return n},lt=function(n,t){var r=$($.parseHTML(n.replace(/\r\n/g,""))),f=r.find("[tmpt-function]"),u,i;if(f.length>0){for(f.each(function(){var b="default",v,y,n,e,o,s,k,r,u,p,w,i,f,g;$functionType=$(this).parent().find("[function-type]");$functionType.length>0&&$(this).attr("function-type")=="replace"&&(b="replace");v=/\[\[[^\]]*\]\]/g;y=/(\[\[)([^\]]*)(\]\])/;switch(b){case"replace":$(this).removeAttr("function-type");k=$(this).attr("tmpt-function");$(this).removeAttr("tmpt-function");var c=$(this).prop("outerHTML"),l=c.match(/{-[^-]*-}/g);if(l!==null)for(r=0;r<l.length;r++){var nt=l[r].match(/({-)([^-]*)(-})/),a=nt[2];if(n=a.match(v),n!==null)for(u=0;u<n.length;u++)e=n[u].match(y),o=e[2],s=h(o,t),a=a.replace(n[u],s);p=k+"("+a+")";w="";try{w=eval(p)}catch(d){alert("tmpt-function(replace方法)错误： "+d.message+", 执行语句为："+p)}c=c.replace(l[r],w)}$(this).prop("outerHTML",c);break;default:if(i=$(this).attr("tmpt-function"),n=i.match(v),n!==null)for(f=0;f<n.length;f++)e=n[f].match(y),o=e[2],s=h(o,t),i=i.replace(n[f],s);try{g=eval(i);$(this).append(g)}catch(d){alert("tmpt-function错误： "+d.message+", 执行语句为："+i)}$(this).removeAttr("tmpt-function")}}),u="",i=0;i<r.length;i++)u+=r[i].outerHTML;return u}return n},at=function(){Array.prototype.forEach||(Array.prototype.forEach=function(n,t){var u,i,r,f,e;if(this===null)throw new TypeError(" this is null or not defined");if(r=Object(this),f=r.length>>>0,{}.toString.call(n)!="[object Function]")throw new TypeError(n+" is not a function");for(t&&(u=t),i=0;i<f;)i in r&&(e=r[i],n.call(u,e,i,r)),i++});Object.keys||(Object.keys=function(n){var t=[];for(var i in n)t.push(i);return t});Array.prototype.indexOf||(Array.prototype.indexOf=function(n){var i=this.length>>>0,t=Number(arguments[1])||0;for(t=t<0?Math.ceil(t):Math.floor(t),t<0&&(t+=i);t<i;t++)if(t in this&&this[t]===n)return t;return-1})},vt=function(){var n=$(".tmpt-m[tmpt-url],.tmpt-m[tmpt-data]");n.length>0&&n.each(function(){i.init($(this))});i.initDelay();t.renderProcess&&t.renderProcess(50,"$dom")};this.getParameter=function(n){var r=g[n],t;return r?r:(t=d[n],t?i.serializToObj(t):null)};this.getData=function(n){return w[n]||null};this.getDoc=function(){return y};this.getTmpt=function(n,t){return t?s[n].find("#"+t):s[n]};this.find=function(n){return f(n)};this.ready=function(n,i){typeof n=="string"&&typeof i=="function"?t.ready[n]=i||!1:typeof n=="function"&&t.ready.all.push(n||!1)};this.error_0=function(n,i){typeof n=="string"&&typeof i=="function"&&(t.error_0[n]=i||!1)};this.onProcessChange=function(n){t.renderProcess=n};this.on=function(n,i,r){typeof n=="string"&&typeof i=="string"&&typeof r=="function"?t[i][n]=r||!1:typeof n=="string"&&typeof i=="function"&&t[n].all.push(i||!1)};this.off=function(n,i){typeof n=="string"&&typeof i=="string"?t[i]&&(t[i][n]=null):typeof n=="string"&&t[n]&&(t[n].all=null)};this.active=function(n){var t,u,f;typeof n=="string"?(t=$("#"+n+"[tmpt-delay]"),u=t.attr("tmpt-delay-time"),u||$.ajax({url:t.attr("tmpt-delay"),type:"get",async:!0,dataType:"html",success:function(n){t.html(n);i.init(t);t.show()},error:function(n){r("ajax-error:",n)}})):(f=$("[tmpt-delay]:not([tmpt-delay-time])"),f.each(function(){var n=$(this);$.ajax({url:n.attr("tmpt-delay"),type:"get",async:!0,dataType:"html",success:function(t){n.html(t);i.init(n);n.show()},error:function(n){r("ajax-error:",n)}})}))};this.delay=function(n){n=$.extend({},{outer:"",tmptId:"",tmptUrl:"",dataUrl:"",data:undefined},n);var t=$(n.outer),u;n.dataUrl?u=n.dataUrl:n.data&&(u=n.data);n.tmptId&&t.attr("id",n.tmptId);$.ajax({url:n.tmptUrl,type:"get",async:!0,dataType:"html",success:function(n){t.html(n);i.init(t,{data:u})},error:function(n){r("ajax-error:",n)}})};this.virtual=function(n,t,u){n=$.extend({tmptUrl:"",complete:""},n);u=u||$("<div><\/div>");n.tmptId&&u.attr("id",n.tmptId);n.tmptUrl?$.ajax({url:n.tmptUrl,type:"get",async:!0,dataType:"html",success:function(t){u.html(t);n.$tmpt=u;var r=i.init(u,n)||{};r.complete&&r.complete(function(){n.complete&&n.complete()})||n.complete()},error:function(n){r("ajax-error:",n)}}):alert("tmptUrl")};this.renderFun=function(n,t){typeof n=="string"&&typeof t=="function"&&(o[n]=t||!1)};this.themesFun=function(n,t){typeof n=="string"&&typeof t=="string"&&(o[n]=t||"")};this.loadJs=function(n){typeof n=="object"?n.length&&$.each(n,function(n,t){$.ajax({url:t,dataType:"script",cache:!0,beforeSend:function(n){n.setRequestHeader("Cache-Control","max-age=0")}})}):typeof n=="string"&&$.each(arguments,function(n,t){var i=document.createElement("script");i.src=t;document.getElementsByTagName("body")[0].appendChild(i)})};this.loadCss=function(n){if(typeof n=="object")n.length&&$.each(n,function(n,t){var i=document.createElement("link");i.href=t;i.rel="stylesheet";document.getElementsByTagName("body")[0].appendChild(script)});else if(typeof n=="string"){var t=document.createElement("link");t.href=n;t.rel="stylesheet";document.getElementsByTagName("body")[0].appendChild(script)}};this.openWindow=function(n){var t=this;n=$.extend({htmlUrl:"",complete:!1,title:""},n);$.ajax({url:n.htmlUrl,type:"get",async:!0,dataType:"html",success:function(t){var i=window.open("","A"),r=i.document,u;r.open();r.write(t);i.document.title=n.title||"newPage";r.close();u=function u(){i.$&&i.$(".tmpt-m:not(.rendered)").length===0?n.complete&&n.complete(i):i.setTimeout(u,100)};u()},error:function(n){alertMs("未找到");r("ajax-error:",n)}})};this.showDialog=function(n,t){var i=$('<div id="tmpt-dialog"><\/div>');n?t?(i.html(p[t]),i.find(".tmpt-dialog-content").text(n)):(i.html(p.dialogDefault),i.find(".tmpt-dialog-content").text(n),i.find(".tmpt-close").click(function(){this.closeDialog()})):i.html(p.dialogLoad);$("body").append(i)};this.closeDialog=function(){$("body #tmpt-dialog").remove()};a={defaultMessage:{max:"字数不能超过{0}字",min:"字数不能少于{0}字"},rules:{__ruleName:{__key:{rule:{max:5,min:1},message:{max:"sssss"}}}}};this.addRule=function(n,t){a.rules[n]=t};this.validate=function(n,t){var f,e,i,o,r,u,s;for(typeof t=="string"&&(t=a.rules[t]),f=[],f=typeof n=="string"?$(n).find("textarea, input, select").not(".novalidate").serializeArray():n,e=0;e<f.length;e++)if(i=f[e],o=i.value,t[i.name])for(r in t[i.name].rule)if(u=t[i.name].rule[r],u){s=t[i.name].message&&t[i.name].message[r]||null;switch(r){case"max":if(o.length>u)return alertMs(s||a.defaultMessage[r].format(u)),!1;break;case"min":if(o.length<u)return alertMs(s||a.defaultMessage[r].format(u)),!1}}return!0};at();$(function(){vt()})}function tmptSearch(n,t){var i=$dom.getParameter(n);$("[tmpt-search],[jy-search]").find("input,select").each(function(n,t){t.value.indexOf("请输入")===0&&(t.value="");i[t.name]=t.value});i.page=1;switch(t){case"courseType":t=i.courseType}$R({tmptId:n,partialId:t||null,parameter:i,errorUrl:"/common/AddFrontError",loginUrl:"/Home/Login.html"})}function PagingController(n,t,i,r,u){var f="",h=4,e;if(n=="无数据"&&t=="无数据"&&i=="无数据"&&r=="无数据")return f;var o=Math.ceil(r/i),c=0,l=0,s="PagingJump";for(c=t-h<1?1:t-h,l=t+h>o?o:t+h,t>1&&(f+='<span><a href="javascript:void(0);" onclick="'+s+"('"+n+"',1,"+i+","+u+')">首页<\/a><\/span>',f+='<span><a href="javascript:void(0);" onclick="'+s+"('"+n+"',"+(t-1)+","+i+","+u+')">上一页<\/a><\/span>'),e=c;e<=l;e++)f+=t==e?'<span class="p_num current">'+e+"<\/span>":'<span class="p_num2"><a href="javascript:void(0);" onclick="'+s+"('"+n+"',"+e+","+i+","+u+')">'+e+"<\/a><\/span>";return t<o&&(f+='<span><a href="javascript:void(0);" onclick="'+s+"('"+n+"',"+(t+1)+","+i+","+u+')">下一页<\/a><\/span>',f+='<span><a href="javascript:void(0);" onclick="'+s+"('"+n+"',"+o+","+i+","+u+')">尾页<\/a><\/span>'),f+("<span>共 "+o+" 页,总记录 "+r+" 条<\/span>")}function PagingPart(n,t,i,r,u){var f="",h=4,e;if(n=="无数据"&&i=="无数据"&&r=="无数据"&&u=="无数据")return f;var o=Math.ceil(u/r),c=0,l=0,s="PagingPartJump";for(c=i-h<1?1:i-h,l=i+h>o?o:i+h,i>1&&(f+='<span><a href="javascript:void(0);" onclick="'+s+"('"+n+"',1,"+r+",'"+t+"')\">首页<\/a><\/span>",f+='<span><a href="javascript:void(0);" onclick="'+s+"('"+n+"',"+(i-1)+","+r+",'"+t+"')\">上一页<\/a><\/span>"),e=c;e<=l;e++)f+=i==e?'<span class="p_num current">'+e+"<\/span>":'<span class="p_num2"><a href="javascript:void(0);" onclick="'+s+"('"+n+"',"+e+","+r+",'"+t+"')\">"+e+"<\/a><\/span>";return i<o&&(f+='<span><a href="javascript:void(0);" onclick="'+s+"('"+n+"',"+(i+1)+","+r+",'"+t+"')\">下一页<\/a><\/span>",f+='<span><a href="javascript:void(0);" onclick="'+s+"('"+n+"',"+o+","+r+",'"+t+"')\">尾页<\/a><\/span>"),f+("<span>共 "+o+" 页,总记录 "+u+" 条<\/span>")}function PagingPartJump(n,t,i,r){var u=$dom.getParameter(n),f;u.page=t;u.rows=i||u.rows;f=$("#"+n+" #"+r).parents(".fun-group").attr("fun-group-name");f&&(u[f]=r);$R({tmptId:n,partialId:r,parameter:u}).complete(function(){$("#"+n+" #"+r).addClass("show")})}function PagingJump(n,t,i,r,u){var e="",f;e=typeof n=="string"?n:n.id;f=$dom.getParameter(e);f?(f.page=t,f.rows=i||f.rows,f.search&&(f.search=""),n=="课程列表"&&(f.teacher="",f.title="",f.courseType=""),r!==undefined&&typeof r=="number"&&(f.categoryId!==undefined&&(f.categoryId=r),f.channelId!==undefined&&(f.channelId=r)),$R({tmptId:e,parameter:f}).complete(function(){typeof u=="function"&&u()})):alert("无请求参数，请检查参数缓存： $dom.routeValue")}function ParseTime(n,t){var r="",i,u;return n!==null&&n!="无数据"&&(n=="now"?(i=new Date,i.setTime(Date.now()),r+=t?i.format(t):i.toLocaleString()):(u=/Date\(([^\)]*)\)/,n.toString().match(u)&&(i=new Date,i.setTime(parseInt(n.toString().match(u)[1])),r+=t?i.format(t):i.toLocaleString()))),r}function alertMs(n,t,i,r){var u={warnType:1,Title:"消息",Message:"错误",theme:"red"},f={HTML:function(n){var t='<div id="msOut">    <div id="msBox">        <div class="msTitle">'+n.Title+'<\/div>        <div class="msMessage">'+n.Message+'<\/div>        <div class="msBtn">            <span class="msConfirm">确定<\/span>'+(n.warnType==2?'<span class="msReject">取消<\/span>':"")+'        <\/div>    <\/div>    <div class="msLayer"><\/div><\/div>';$("body").append(t);this.CSS(n)},CSS:function(n){var u={red:"#CC3300",blue:"#99CCFF",green:"#00FF99",yellow:"#FFFF66"},t=u[n.theme];for(var f in u)if(f==n.theme){t=u[f];break}$("#msOut").css({width:"100%",height:"100%",zIndex:"99999",position:"fixed",top:"0",left:"0"});$(".msLayer").css({width:"100%",height:"100%",filter:"Alpha(opacity=40)",backgroundColor:"#000",opacity:"0.4"});$("#msBox").css({width:"500px",height:"300px",zIndex:"99999",position:"absolute",opacity:"0"});$(".msTitle").css({display:"block",fontSize:"14px",color:"#444",padding:"10px 15px",backgroundColor:"#f0f4f7",borderRadius:"15px 15px 0 0",borderBottom:"3px solid "+t,fontWeight:"bold"});$(".msMessage").css({padding:" 50px","line-height":" 22px","background-color":"#393D49",color:"#fff","font-weight":"300",overflow:"hidden","text-overflow":"ellipsis"});$(".msBtn").css({padding:"15px 0 10px 0",borderRadius:"0 0 15px 15px",textAlign:"center","background-color":"#f0f4f7"});$(".msConfirm").css({display:"inline-block",height:"28px","line-height":"28px",margin:"0 6px",padding:"0 15px",border:"1px solid"+t,"background-color":t,color:" #fff","border-radius":"2px","font-weight":"400",cursor:"pointer","text-decoration":"none"});$(".msReject").css({display:"inline-block",height:"28px","line-height":"28px",margin:"0 6px",padding:"0 15px",border:"1px solid #dedede","background-color":"#f1f1f1",color:"#333","border-radius":"2px","font-weight":"400",cursor:"pointer","text-decoration":"none"});this.Event(i,r)},Event:function(n,t){var i=document.documentElement.clientWidth,u=document.documentElement.clientHeight,r=$("#msBox").width(),f=$("#msBox").height();$("#msBox").css({left:(i-r)/2+"px"});$("#msBox").stop().animate({top:(u-f)/2+"px",left:(i-r)/2+"px",opacity:"1"},300);$(".msConfirm").click(function(){$("#msBox").stop().animate({top:"0",opacity:"0.2"},300,function(){$("#msOut").remove()});typeof n=="function"&&(n(),$(".msOut").remove())});$(".msReject").click(function(){$("#msBox").stop().animate({top:"0",opacity:"0.2"},300,function(){$("#msOut").remove()});typeof t=="function"&&(t(),$(".msOut").remove())})}};typeof n=="string"?(u.Message=n,typeof t=="number"?t!=3?(u=$.extend(u,{warnType:t}),f.HTML(u)):alert(u.Message):typeof t=="function"?(i=t,f.HTML(u)):f.HTML(u)):typeof n=="object"&&(u=$.extend(u,n),typeof t=="number"?t!=3?(u=$.extend(u,{warnType:t}),f.HTML(u)):alert(u.Message):typeof t=="function"?(u=$.extend(u,n),i=t,f.HTML(u)):f.HTML(u))}function JudgeType(n){var t="";return n=="ThreeScreenCourse"?t="三分屏":n=="AnimationCourse"?t="动画":n=="SingleCourse"&&(t="单视频"),t}function JudgeStatus(n){var t="";if(n!="null")switch(n){case"Normal":t+="已报名";break;case"UnAudit":t+="等待审核";break;case"UnApprove":t+="审核未通过"}return t}var 无数据=null,crossDomain=!1,origin=document.location.protocol+"//"+document.location.host,API_URL,$dom,$R,IsArray;API_URL||(API_URL="");origin!=API_URL.substring(0,API_URL.lastIndexOf("/"))&&(jQuery.support.cors=!0,crossDomain=!0,$.ajaxSetup({contentType:"application/x-www-form-urlencoded;charset=UTF-8",xhrFields:{withCredentials:!0}}));$.extend({tpajax:function(n){var t=$.extend({},{success:function(){},beforeSend:function(){},loadFlag:!1},n),i=t.success;return t.beforeSend=function(t){n.beforeSend&&n.beforeSend(t)},t.error=function(t){n.error&&n.error(t)},t.success=function(n){if(n)if(!n.Type||n.Type!=401)i(n);else{document.location="/"+n.Message+"?/admin";return}else return alert("无法获取数据"),!1},t.complete=function(t){n.complete&&n.complete(t)},$.ajax(t)}});$dom=new TmptJs({apiUrl:API_URL,noImage:"/Content/V3/images/notFound.jpeg"});$R=$dom.fac;$(function(){$("body").on("click",".tmpt-onsearch",function(){})});String.format=function(n){var t=arguments;return n.replace(/\{\d+\}/ig,function(n){var i=parseInt(n.match(/{(\d+)}/)[1]);return t[i+1]})};String.prototype.format=function(){var n=arguments;return this.replace(/\{\d+\}/ig,function(t){var i=parseInt(t.match(/{(\d+)}/)[1]);return n[i]})};Date.prototype.format=function(n){var i={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),"S+":this.getMilliseconds()},t;/(y+)/i.test(n)&&(n=n.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(t in i)new RegExp("("+t+")").test(n)&&(n=n.replace(RegExp.$1,RegExp.$1.length==1?i[t]:("00"+i[t]).substr((""+i[t]).length)));return n};IsArray=function(n){return n&&typeof n=="object"&&typeof n.length=="number"&&typeof n.splice=="function"&&!n.propertyIsEnumerable("length")};String.prototype.toCharCode=function(n){var i="",t;for(n=n||" ",t=0;t<this.length;t++)i+=this.charCodeAt(t)+n;return i};String.prototype.toCharString=function(n){var r="",i,t;for(n=n||" ",i=this.split(n),t=0;t<i.length;t++)r+=String.fromCharCode(i[t]);return r};$dom.renderFun("examIndex",function(n,t){var i=0;return i=(n.Type0Questions||[]).length>0?t==="Type0Questions"?i:(++i,(n.Type1Questions||[]).length>0?t==="Type1Questions"?i:(++i,(n.Type2Questions||[]).length>0?t==="Type2Questions"?i:(++i,(n.Type3Questions||[]).length>0?t==="Type3Questions"?i:i:++i):(n.Type3Questions||[]).length>0?t==="Type3Questions"?i:i:++i):(n.Type2Questions||[]).length>0?t==="Type2Questions"?i:(++i,(n.Type3Questions||[]).length>0?t==="Type3Questions"?i:i:++i):++i):(n.Type1Questions||[]).length>0?t==="Type1Questions"?i:(++i,(n.Type2Questions||[]).length>0?t==="Type2Questions"?i:(++i,(n.Type3Questions||[]).length>0?t==="Type3Questions"?i:i:++i):++i):++i,["一","二","三","四","五","六","七","八","九","十"][i]});